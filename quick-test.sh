#!/bin/bash

# Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ´Ğ»Ñ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ SOCKS5 Proxy
# Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: ./quick-test.sh

PROXY="socks5h://127.0.0.1:1080"

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  SOCKS5 Proxy - Ğ‘Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ     â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ° Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°
test_url() {
    local url=$1
    local name=$2

    echo -n "Ğ¢ĞµÑÑ‚: $name ... "

    if curl -s -m 5 -x "$PROXY" "$url" > /dev/null 2>&1; then
        echo "âœ… OK"
    else
        echo "âŒ FAIL"
    fi
}

echo "1ï¸âƒ£  Ğ¢ĞµÑÑ‚Ñ‹ WHITELIST (Ğ¿Ñ€ÑĞ¼Ğ¾Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ)"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
test_url "http://ya.ru" "Ğ¯Ğ½Ğ´ĞµĞºÑ"
test_url "http://mail.ru" "Mail.ru"
test_url "http://vk.com" "Ğ’ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğµ"
test_url "http://habr.com" "Habr"
echo ""

echo "2ï¸âƒ£  Ğ¢ĞµÑÑ‚Ñ‹ BLACKLIST (Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ°)"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
test_url "http://badwebsite.com" "badwebsite.com (Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½)"
test_url "http://doubleclick.net" "doubleclick.net (Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ°)"
echo ""

echo "3ï¸âƒ£  Ğ¢ĞµÑÑ‚Ñ‹ SEGMENT (ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ)"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
test_url "http://web.telegram.org" "telegram.org"
echo ""

echo "4ï¸âƒ£  Ğ¢ĞµÑÑ‚Ñ‹ HTTPS"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
test_url "https://ya.ru" "HTTPS Ğ¯Ğ½Ğ´ĞµĞºÑ"
test_url "https://mail.ru" "HTTPS Mail.ru"
test_url "https://github.com" "HTTPS GitHub"
echo ""

echo "5ï¸âƒ£  Ğ¢ĞµÑÑ‚Ñ‹ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… ÑĞ°Ğ¹Ñ‚Ğ¾Ğ²"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
test_url "http://rbc.ru" "Ğ Ğ‘Ğš"
test_url "http://ria.ru" "Ğ Ğ˜Ğ ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸"
test_url "http://tass.ru" "Ğ¢ĞĞ¡Ğ¡"
test_url "http://interfax.ru" "Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„Ğ°ĞºÑ"
echo ""

echo "âœ… Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾!"
echo ""
echo "ğŸ’¡ ĞŸĞ¾Ğ´ÑĞºĞ°Ğ·ĞºĞ¸:"
echo "   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ´Ğ»Ñ Ğ´ĞµÑ‚Ğ°Ğ»ĞµĞ¹"
echo "   - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ./test-proxy.sh Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
echo "   - ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°: sudo tcpdump -i lo port 1080"